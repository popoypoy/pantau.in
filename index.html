<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistem Pengelolaan Aset</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <script>
      function getGreeting() {
        const hour = new Date().getHours();
        if (hour >= 5 && hour < 12) return 'Selamat pagi, User';
        if (hour >= 12 && hour < 15) return 'Selamat siang, User';
        if (hour >= 15 && hour < 18) return 'Selamat sore, User';
        return 'Selamat malam, User';
      }

      document.addEventListener('DOMContentLoaded', () => {
        const role = localStorage.getItem('role');
        if (!role) {
          window.location.href = 'login.html';
          return;
        }

        const name = role === 'admin' ? 'Admin' : 'User';
        const greeting = document.getElementById('greeting');
        if (greeting) greeting.textContent = getGreeting().replace('User', name);

        const pages = document.querySelectorAll('.page-section');
        pages.forEach((section) => section.classList.add('hidden'));
        document.getElementById('home')?.classList.remove('hidden');

        document.querySelectorAll('.nav-link').forEach((link) => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = link.getAttribute('data-target');
            pages.forEach((section) => section.classList.add('hidden'));
            document.getElementById(target)?.classList.remove('hidden');
          });
        });

        if (role !== 'admin') {
          document.querySelectorAll('.btn-approval').forEach((btn) => {
            btn.disabled = true;
            btn.classList.add('opacity-0', 'cursor-disabel');
            btn.title = 'Hanya admin yang dapat menggunakan fitur ini';
          });
        }
      });
      function showForm(formId) {
        const sections = document.querySelectorAll('.page-section');
        sections.forEach((section) => section.classList.add('hidden'));
        document.getElementById(formId).classList.remove('hidden');
      }
    </script>
  </head>
  <body class="bg-gradient-to-br from-purple-50 to-blue-100 min-h-screen">
    <!-- Tombol Toggle -->
    <button id="sidebarToggle" class="md:hidden fixed top-3 left-3 z-50 p-2 bg-gray-200 rounded">
      <svg class="w-6 h-6 text-gray-800" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <div class="flex">
      <!-- Sidebar -->
      <aside id="sidebar" class="fixed md:relative w-64 bg-white shadow-md p-6 min-h-screen transition-transform duration-300 transform -translate-x-full md:translate-x-0 z-40">
        <div class="flex items-center gap-3 mb-10">
          <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </div>
        <nav class="space-y-4">
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="home"> 🏠 Home </a>
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="inventaris"> 📦 Inventaris </a>
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="mutasi"> 🚚 Mutasi </a>
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="peminjaman"> 🏢 Peminjaman </a>
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="peminjaman-zoom"> 🎦 Peminjaman Zoom </a>
          <a href="#" class="nav-link w-full block text-left py-2 px-4 hover:bg-gray-100 rounded" data-target="pemesanan-grab"> 🚕 Pemesanan Grab </a>
        </nav>
        <div id="admin-reset" class="mt-4"></div>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 p-10">
        <!-- Topbar -->
        <div class="flex items-center justify-between mb-10">
          <img src="Gambar/Logo Pantau.in.png" alt="Pantau.in Logo" class="h-28 ml-4" />
          <div class="flex items-center gap-4">
            <span id="greeting" class="text-gray-700 font-medium"></span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 2a4 4 0 100 8 4 4 0 000-8zM2 16a8 8 0 1116 0H2z" clip-rule="evenodd" />
            </svg>
            <button onclick="logout()" class="text-sm bg-red-200 hover:bg-red-200 text-red-600 px-3 py-1 rounded-full transition" title="Logout">Logout</button>
          </div>
        </div>

        <!-- Home Section -->
        <div id="home" class="page-section bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-2xl font-semibold text-gray-700 mb-4">Statistik Pengelolaan Aset</h2>
          <div class="grid grid-cols-3 gap-6 text-center">
            <div class="p-4 bg-blue-100 rounded-xl">
              <p class="text-sm text-gray-600">Inventaris</p>
              <p class="text-xl font-bold">732</p>
            </div>
            <div class="p-4 bg-yellow-100 rounded-xl">
              <p class="text-sm text-gray-600">Kendaraan Roda 4</p>
              <p class="text-xl font-bold">7</p>
            </div>
            <div class="p-4 bg-green-100 rounded-xl">
              <p class="text-sm text-gray-600">Driver</p>
              <p class="text-xl font-bold">3</p>
            </div>
          </div>
        </div>
        <div id="admin-dashboard" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 hidden">
          <div class="bg-yellow-100 rounded-xl p-4 shadow">
            <h3 class="font-bold text-lg">Mutasi Belum Disetujui</h3>
            <p id="count-mutasi-pending" class="text-3xl font-bold text-yellow-700">0</p>
          </div>
          <div class="bg-blue-100 rounded-xl p-4 shadow">
            <h3 class="font-bold text-lg">Peminjaman Belum Disetujui</h3>
            <p id="count-peminjaman-pending" class="text-3xl font-bold text-blue-700">0</p>
          </div>
          <div class="bg-purple-100 rounded-xl p-4 shadow">
            <h3 class="font-bold text-lg">Zoom Belum Disetujui</h3>
            <p id="count-zoom-pending" class="text-3xl font-bold text-purple-700">0</p>
          </div>
          <div class="bg-pink-100 rounded-xl p-4 shadow">
            <h3 class="font-bold text-lg">Grab Belum Disetujui</h3>
            <p id="count-grab-pending" class="text-3xl font-bold text-pink-700">0</p>
          </div>
        </div>

        <!-- Inventaris Section -->
        <!-- Inventaris Section -->
        <div id="inventaris" class="page-section bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Data Inventaris</h2>

          <!-- Filter dan Input -->
          <div class="mb-4 flex flex-col md:flex-row gap-4 flex-wrap">
            <!-- Input pencarian -->
            <input type="text" id="filterKodeNama" placeholder="Cari Kode atau Nama Aset..." class="border border-gray-300 rounded px-4 py-2 flex-1" onkeyup="filterTable()" />

            <!-- Dropdown filter lokasi -->
            <select id="filterLokasi" class="border border-gray-300 rounded px-4 py-2" onchange="filterTable()">
              <option value="">Semua Lokasi</option>
              <option value="SDMUK">SDMUK</option>
              <option value="Lokasi Lain">Lokasi Lain</option>
            </select>

            <select id="filterKondisiSidebar" class="border border-gray-300 rounded px-4 py-2" onchange="filterTable()">
              <option value="">Semua Kondisi</option>
              <option value="Baik">Baik</option>
              <option value="Rusak">Rusak</option>
              <option value="Rusak Berat">Rusak Berat</option>
            </select>
            <a
              href="#"
              id="btnTambahInventaris"
              class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-max mb-0,5"
              onclick="if(getUserRole() !== 'admin'){ alert('Hanya admin yang bisa menambah inventaris atau segera laporkan kebagian SDM apabila ada pemindahan lokasi aset atau perubahan kondisi aset'); return false; } showForm('form-inventaris');">
              + Tambahkan Inventaris
            </a>
          </div>

          <!-- Tabel Inventaris -->
          <table class="min-w-full table-auto" id="inventarisTable">
            <thead>
              <tr class="bg-gray-100 text-left">
                <th class="px-4 py-2">Kode</th>
                <th class="px-4 py-2">Nama Aset</th>
                <th class="px-4 py-2">Lokasi</th>
                <th class="px-4 py-2">Kondisi</th>
                <th class="px-4 py-2">Foto</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Mutasi Section -->
        <div id="mutasi" class="page-section bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Mutasi Kendaraan & Driver</h2>

          <!-- Filter Mutasi -->
          <div class="mb-4 flex flex-col md:flex-row gap-4">
            <input type="text" id="filterMutasiNama" placeholder="Cari nama..." class="border border-gray-300 rounded px-4 py-2 flex-1" onkeyup="filterMutasi()" />
            <select id="filterMutasiBagian" class="border border-gray-300 rounded px-4 py-2" onchange="filterMutasi()">
              <option value="">Semua Bagian</option>
              <option value="SDMUK">SDMUK</option>
              <option value="Bagian Lain">Bagian Lain</option>
            </select>
            <a href="#" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 w-max mb-0,5" onclick="showForm('form-mutasi')">+ Tambahkan Mutasi</a>
          </div>

          <table class="min-w-full table-auto" id="mutasiTable">
            <thead>
              <tr class="bg-gray-100 text-left">
                <th class="px-4 py-2">NPP</th>
                <th class="px-4 py-2">Nama</th>
                <th class="px-4 py-2">Bagian</th>
                <th class="px-4 py-2">Tanggal</th>
                <th class="px-4 py-2">Jam Pinjam</th>
                <th class="px-4 py-2">Jam Selesai</th>
                <th class="px-4 py-2">Kendaraan</th>
                <th class="px-4 py-2">Driver</th>
                <th class="px-4 py-2">Tujuan</th>
                <th class="px-4 py-2">Keterangan</th>
                <th class="px-4 py-2">Approval</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Peminjaman Section -->
        <div id="peminjaman" class="page-section bg-white rounded-2xl shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">Peminjaman Ruangan</h2>

          <!-- Filter Peminjaman -->
          <div class="mb-4 flex flex-col md:flex-row gap-4">
            <input type="text" id="filterPeminjamanNama" placeholder="Cari nama..." class="border border-gray-300 rounded px-4 py-2 flex-1" onkeyup="filterPeminjaman()" />
            <select id="filterPeminjamanRuangan" class="border border-gray-300 rounded px-4 py-2" onchange="filterPeminjaman()">
              <option value="">Semua Ruangan</option>
              <option value="Ruang Rapat Kecil">Ruang Rapat Kecil</option>
              <option value="Ruangan Lain">Ruangan Lain</option>
            </select>
            <a href="#" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-green-600 w-max mb-0,5" onclick="showForm('form-peminjaman')">+ Tambahkan Peminjaman</a>
          </div>

          <table class="min-w-full table-auto" id="peminjamanTable">
            <thead>
              <tr class="bg-gray-100 text-left">
                <th class="px-4 py-2">NPP</th>
                <th class="px-4 py-2">Nama</th>
                <th class="px-4 py-2">Bagian</th>
                <th class="px-4 py-2">Tanggal</th>
                <th class="px-4 py-2">Waktu</th>
                <th class="px-4 py-2">Keterangan</th>
                <th class="px-4 py-2">Ruangan</th>
                <th class="px-4 py-2">Approval</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Section Peminjaman Zoom -->
        <div id="peminjaman-zoom" class="page-section bg-white rounded-2xl shadow-lg p-6 mb-10 hidden">
          <h2 class="text-xl font-semibold mb-4">Peminjaman Akun Zoom</h2>

          <!-- Filter -->
          <div class="mb-4 flex flex-col md:flex-row gap-4">
            <input type="text" id="filterZoomNama" placeholder="Cari nama..." class="border border-gray-300 rounded px-4 py-2 flex-1" onkeyup="filterZoom()" />
            <a href="#" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-max mb-0.5" onclick="showForm('form-zoom')">+ Tambahkan Peminjaman Zoom</a>
          </div>

          <!-- Tabel -->
          <table class="min-w-full table-auto" id="zoomTable">
            <thead>
              <tr class="bg-gray-100 text-left">
                <th class="px-4 py-2">NPP</th>
                <th class="px-4 py-2">Nama</th>
                <th class="px-4 py-2">Bagian</th>
                <th class="px-4 py-2">Tanggal</th>
                <th class="px-4 py-2">Waktu</th>
                <th class="px-4 py-2">Kegiatan</th>
                <th class="px-4 py-2">Akun</th>
                <th class="px-4 py-2">Approval</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Section Pemesanan Grab -->
        <div id="pemesanan-grab" class="page-section bg-white rounded-2xl shadow-lg p-6 mb-10 hidden">
          <h2 class="text-xl font-semibold mb-4">Pemesanan Grab</h2>

          <!-- Filter -->
          <div class="mb-4 flex flex-col md:flex-row gap-4">
            <input type="text" id="filterGrabNama" placeholder="Cari nama..." class="border border-gray-300 rounded px-4 py-2 flex-1" />
            <a href="#" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-green-600 w-max mb-0.5" onclick="showForm('form-grab')">+ Tambahkan Pemesanan Grab</a>
          </div>

          <!-- Tabel -->
          <table class="min-w-full table-auto" id="grabTable">
            <thead>
              <tr class="bg-gray-100 text-left">
                <th class="px-4 py-2">NPP</th>
                <th class="px-4 py-2">Nama</th>
                <th class="px-4 py-2">Tanggal</th>
                <th class="px-4 py-2">Jam</th>
                <th class="px-4 py-2">Tujuan</th>
                <th class="px-4 py-2">Keterangan</th>
                <th class="px-4 py-2">Kode</th>
                <th class="px-4 py-2">Approval</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Form Tambah Inventaris -->
        <!-- Form Tambah Inventaris -->
        <div id="form-inventaris" class="page-section hidden bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Form Tambah Inventaris</h2>
          <form class="space-y-4" onsubmit="event.preventDefault(); submitFormInventaris();">
            <input type="text" id="inv-kode" placeholder="Kode Aset" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="inv-nama" placeholder="Nama Aset" class="w-full border px-4 py-2 rounded" />
            <select id="inv-lokasi" class="w-full border px-4 py-2 rounded">
              <option value="Aula">Aula</option>
              <option value="Mushola">Mushola</option>
              <option value="Ruang Rapat Kecil">Ruang Rapat Kecil</option>
              <option value="Ruang Kaca">Ruang Kaca</option>
              <option value="Kepala Cabang">Kepala Cabang</option>
              <option value="Ruang Server">Ruang Server</option>
              <option value="SDMUK">SDMUK</option>
              <option value="PKP">PKP</option>
              <option value="Frontliner">Frontliner</option>
              <option value="Kabag Yanser">Kabag Yanser</option>
              <option value="Staf Yanser">Staf Yanser</option>
              <option value="Kabag Kepser">Kabag Kepser</option>
              <option value="Staf Kepser">Staf Kepser</option>
              <option value="Ruang Inovasi">Ruang Inovasi</option>
              <option value="Dapur">Dapur</option>
              <option value="Gudang Dalam">Gudang Dalam</option>
              <option value="Kabag PMU">Kabag PMU</option>
              <option value="Staf PMU">Staf PMU</option>
              <option value="Kabag Yanfaskes">Kabag Yanfaskes</option>
              <option value="Staf Yanfaskes">Staf Yanfaskes</option>
              <option value="Gudang Belakang">Gudang Belakang</option>
              <option value="Kabupaten Batang">Kabupaten Batang</option>
              <option value="Kabupaten Pekalongan">Kabupaten Pekalongan</option>
              <option value="Kabupaten Pemalang">Kabupaten pemalang</option>
            </select>
            <select id="inv-kondisi" class="w-full border px-4 py-2 rounded">
              <option value="Baik">Baik</option>
              <option value="Rusak">Rusak</option>
              <option value="Rusak Berat">Rusak Berat</option>
            </select>

            <!-- Input Foto -->
            <div>
              <label class="block mb-1 text-sm font-medium text-gray-700">Upload Foto</label>
              <input
                type="file"
                id="inv-foto"
                accept="image/*"
                class="w-full border px-4 py-2 rounded bg-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
            </div>

            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Simpan</button>
          </form>
        </div>

        <!-- Form Tambah Mutasi -->
        <div id="form-mutasi" class="page-section hidden bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Form Tambah Mutasi</h2>
          <form class="space-y-4" onsubmit="event.preventDefault(); submitFormMutasi();">
            <input type="text" id="mutasi-npp" placeholder="NPP" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="mutasi-nama" placeholder="Nama" class="w-full border px-4 py-2 rounded" />
            <select id="mutasi-bagian" class="w-full border px-4 py-2 rounded">
              <option value="SDMUK">SDMUK</option>
              <option value="PKP">PKP</option>
              <option value="Yanser">Yanser</option>
              <option value="Kepser">Kepser</option>
              <option value="PMU">PMU</option>
              <option value="Yanfaskes">Yanfaskes</option>
              <option value="Kabupaten Batang">Kabupaten Batang</option>
              <option value="Kabupaten Pekalongan">Kabupaten Pekalongan</option>
              <option value="Kabupaten Pemalang">Kabupaten pemalang</option>
            </select>
            <input type="date" id="mutasi-tanggal" class="w-full border px-4 py-2 rounded" />
            <input type="time" id="mutasi-jamPinjam" placeholder="Jam Pinjam" class="w-full border px-4 py-2 rounded" />
            <input type="time" id="mutasi-jamSelesai" placeholder="Jam Selesai" class="w-full border px-4 py-2 rounded" />
            <select id="mutasi-kendaraan" class="w-full border px-4 py-2 rounded">
              <option value="Innova Kebo G 1366 HH">Innova Kebo G 1366 HH</option>
              <option value="Innova Barong G 1427 GH">Innova Barong G 1427 GH</option>
              <option value="Avanza G 1972 HH">Avanza G 1972 HH</option>
              <option value="Ertiga  G 1532 JH">Innova Barong G 1427 GH</option>
            </select>
            <select id="mutasi-driver" class="w-full border px-4 py-2 rounded">
              <option value="Lutfi">Lutfi</option>
              <option value="Trisno">Teguh</option>
              <option value="Rifki">Budi</option>
            </select>
            <input type="text" id="mutasi-tujuan" placeholder="Tujuan" class="w-full border px-4 py-2 rounded" />
            <textarea id="mutasi-keterangan" placeholder="Keterangan" class="w-full border px-4 py-2 rounded"> </textarea>
            <button class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">Simpan</button>
          </form>
        </div>

        <!-- Form Tambah Peminjaman -->
        <div id="form-peminjaman" class="page-section hidden bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Form Tambah Peminjaman</h2>
          <form class="space-y-4" onsubmit="event.preventDefault(); submitFormPeminjaman();">
            <input type="text" id="pinjam-npp" placeholder="NPP" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="pinjam-nama" placeholder="Nama" class="w-full border px-4 py-2 rounded" />
            <select id="pinjam-bagian" class="w-full border px-4 py-2 rounded">
              <option value="SDMUK">SDMUK</option>
              <option value="PKP">PKP</option>
              <option value="Yanser">Yanser</option>
              <option value="Kepser">Kepser</option>
              <option value="PMU">PMU</option>
              <option value="Yanfaskes">Yanfaskes</option>
              <option value="Kabupaten Batang">Kabupaten Batang</option>
              <option value="Kabupaten Pekalongan">Kabupaten Pekalongan</option>
              <option value="Kabupaten Pemalang">Kabupaten pemalang</option>
            </select>
            <input type="date" id="pinjam-tanggal" class="w-full border px-4 py-2 rounded" />
            <input type="time" id="pinjam-waktu" placeholder="Waktu" class="w-full border px-4 py-2 rounded" />
            <textarea id="pinjam-keterangan" placeholder="Keterangan" class="w-full border px-4 py-2 rounded"> </textarea>
            <select id="pinjam-ruangan" class="w-full border px-4 py-2 rounded">
              <option value="Aula">Aula</option>
              <option value="Ruang Rapat Kecil">Ruang Rapat Kecil</option>
              <option value="Ruang Kaca">Ruang Kaca</option>
            </select>
            <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Simpan</button>
          </form>
        </div>

        <!-- Form Tambah Zoom -->
        <div id="form-zoom" class="page-section hidden bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Form Tambah Peminjaman Zoom</h2>
          <form class="space-y-4" onsubmit="event.preventDefault(); submitFormZoom();">
            <input type="text" id="zoom-npp" placeholder="NPP" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="zoom-nama" placeholder="Nama" class="w-full border px-4 py-2 rounded" />
            <select id="zoom-bagian" class="w-full border px-4 py-2 rounded">
              <option value="SDMUK">SDMUK</option>
              <option value="PKP">PKP</option>
              <option value="Yanser">Yanser</option>
              <option value="Kepser">Kepser</option>
              <option value="PMU">PMU</option>
              <option value="Yanfaskes">Yanfaskes</option>
              <option value="Kabupaten Batang">Kabupaten Batang</option>
              <option value="Kabupaten Pekalongan">Kabupaten Pekalongan</option>
              <option value="Kabupaten Pemalang">Kabupaten pemalang</option>
            </select>
            <input type="date" id="zoom-tanggal" class="w-full border px-4 py-2 rounded" />
            <input type="time" id="zoom-waktu" placeholder="Waktu" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="zoom-kegiatan" placeholder="Topik/Kegiatan" class="w-full border px-4 py-2 rounded" />
            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Simpan</button>
          </form>
        </div>

        <!-- Form Tambah Grab -->
        <div id="form-grab" class="page-section hidden bg-white rounded-2xl shadow-lg p-6 mb-10">
          <h2 class="text-xl font-semibold mb-4">Form Tambah Pemesanan Grab</h2>
          <form class="space-y-4" onsubmit="event.preventDefault(); submitFormGrab();">
            <input type="text" id="grab-npp" placeholder="NPP" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="grab-nama" placeholder="Nama" class="w-full border px-4 py-2 rounded" />
            <input type="date" id="grab-tanggal" class="w-full border px-4 py-2 rounded" />
            <input type="time" id="grab-jam" placeholder="Jam" class="w-full border px-4 py-2 rounded" />
            <input type="text" id="grab-tujuan" placeholder="Tujuan" class="w-full border px-4 py-2 rounded" />
            <textarea id="grab-keterangan" placeholder="Keterangan" class="w-full border px-4 py-2 rounded"></textarea>
            <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Simpan</button>
          </form>
        </div>
      </main>
    </div>

    <script>
      function getUserRole() {
        return localStorage.getItem('role');
      }

      function filterTable() {
        const searchInput = document.getElementById('filterKodeNama')?.value.toLowerCase() || '';
        const lokasiFilter = document.getElementById('filterLokasi')?.value.toLowerCase() || '';
        const kondisiFilter = document.getElementById('filterKondisiSidebar')?.value.toLowerCase() || '';

        const table = document.getElementById('inventarisTable');
        const tr = table?.getElementsByTagName('tr');

        if (!table || !tr) return;

        for (let i = 1; i < tr.length; i++) {
          const tdKode = tr[i].getElementsByTagName('td')[0];
          const tdNama = tr[i].getElementsByTagName('td')[1];
          const tdLokasi = tr[i].getElementsByTagName('td')[2];
          const tdKondisi = tr[i].getElementsByTagName('td')[3];

          if (tdKode && tdNama && tdLokasi && tdKondisi) {
            const kodeValue = tdKode.textContent.toLowerCase();
            const namaValue = tdNama.textContent.toLowerCase();
            const lokasiValue = tdLokasi.textContent.toLowerCase();
            const kondisiValue = tdKondisi.textContent.toLowerCase();

            const matchSearch = kodeValue.includes(searchInput) || namaValue.includes(searchInput);
            const matchLokasi = lokasiValue === lokasiFilter || lokasiFilter === '';
            const matchKondisi = kondisiValue === kondisiFilter || kondisiFilter === '';

            if (matchSearch && matchLokasi && matchKondisi) {
              tr[i].style.display = '';
            } else {
              tr[i].style.display = 'none';
            }
          }
        }
      }
      document.addEventListener('DOMContentLoaded', function () {
        if (getUserRole && getUserRole() === 'admin') {
          const countPending = (key) => {
            return (JSON.parse(localStorage.getItem(key) || '[]') || []).filter((item) => item.approval === false).length;
          };
          document.getElementById('count-mutasi-pending').textContent = countPending('mutasi');
          document.getElementById('count-peminjaman-pending').textContent = countPending('peminjaman');
          document.getElementById('count-zoom-pending').textContent = countPending('zoom');
          document.getElementById('count-grab-pending').textContent = countPending('grab');

          // Tampilkan dashboard jika admin
          document.getElementById('admin-dashboard').classList.remove('hidden');
        }
      });

      function filterMutasi() {
        const input = document.getElementById('filterMutasiNama')?.value.toLowerCase() || '';
        const bagian = document.getElementById('filterMutasiBagian')?.value.toLowerCase() || '';
        const table = document.getElementById('mutasiTable');
        const tr = table?.getElementsByTagName('tr');

        if (!table || !tr) return;

        for (let i = 1; i < tr.length; i++) {
          const tdNama = tr[i].getElementsByTagName('td')[1];
          const tdBagian = tr[i].getElementsByTagName('td')[2];

          if (tdNama && tdBagian) {
            const namaValue = tdNama.textContent.toLowerCase();
            const bagianValue = tdBagian.textContent.toLowerCase();

            if ((namaValue.includes(input) || input === '') && (bagianValue === bagian || bagian === '')) {
              tr[i].style.display = '';
            } else {
              tr[i].style.display = 'none';
            }
          }
        }
      }

      function filterPeminjaman() {
        const input = document.getElementById('filterPeminjamanNama')?.value.toLowerCase() || '';
        const ruangan = document.getElementById('filterPeminjamanRuangan')?.value.toLowerCase() || '';
        const table = document.getElementById('peminjamanTable');
        const tr = table?.getElementsByTagName('tr');

        if (!table || !tr) return;

        for (let i = 1; i < tr.length; i++) {
          const tdNama = tr[i].getElementsByTagName('td')[1];
          const tdRuangan = tr[i].getElementsByTagName('td')[6];

          if (tdNama && tdRuangan) {
            const namaValue = tdNama.textContent.toLowerCase();
            const ruanganValue = tdRuangan.textContent.toLowerCase();

            if ((namaValue.includes(input) || input === '') && (ruanganValue === ruangan || ruangan === '')) {
              tr[i].style.display = '';
            } else {
              tr[i].style.display = 'none';
            }
          }
        }
      }

      function filterZoom() {
        const input = document.getElementById('filterZoomNama')?.value.toLowerCase() || '';
        const table = document.getElementById('zoomTable');
        const tr = table?.getElementsByTagName('tr');

        if (!table || !tr) return;

        for (let i = 1; i < tr.length; i++) {
          const tdNama = tr[i].getElementsByTagName('td')[1];
          const tdAkun = tr[i].getElementsByTagName('td')[6];

          if (tdNama && tdAkun) {
            const namaValue = tdNama.textContent.toLowerCase();
            const akunValue = tdAkun.textContent.toLowerCase();

            if ((namaValue.includes(input) || input === '') && (akunValue === akun || akun === '')) {
              tr[i].style.display = '';
            } else {
              tr[i].style.display = 'none';
            }
          }
        }
      }

      function filterGrab() {
        const input = document.getElementById('filterGrabNama')?.value.toLowerCase() || '';
        const table = document.getElementById('grabTable');
        const tr = table?.getElementsByTagName('tr');

        if (!table || !tr) return;

        for (let i = 1; i < tr.length; i++) {
          const tdNama = tr[i].getElementsByTagName('td')[1];
          if (tdNama) {
            const namaValue = tdNama.textContent.toLowerCase();
            tr[i].style.display = namaValue.includes(input) ? '' : 'none';
          }
        }
      }

      function logout() {
        localStorage.removeItem('role');
        window.location.href = 'login.html';
      }
    </script>
    <script src="aset-app.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const role = localStorage.getItem('role');
        if (role === 'admin') {
          document.getElementById('admin-reset').innerHTML = `
        <button onclick="resetSeluruhData()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 w-full">
          🔥 Reset Semua Data
        </button>
      `;
        }
      });
    </script>
    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-30 md:hidden"></div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const toggleBtn = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        if (!toggleBtn || !sidebar) return;

        toggleBtn.addEventListener('click', () => {
          sidebar.classList.toggle('-translate-x-full');
          overlay?.classList.toggle('hidden');
        });

        overlay?.addEventListener('click', () => {
          sidebar.classList.add('-translate-x-full');
          overlay.classList.add('hidden');
        });

        // Tutup sidebar saat klik nav link di layar kecil
        document.querySelectorAll('.nav-link').forEach((link) => {
          link.addEventListener('click', () => {
            if (window.innerWidth < 768) {
              sidebar.classList.add('-translate-x-full');
              overlay.classList.add('hidden');
            }
          });
        });
      });
    </script>
  </body>
</html>
